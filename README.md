# Local Dev Insights MCP Server

このMCPサーバーは、ローカル開発環境のインサイトを提供し、開発ワークフローを支援するために設計されました。システムリソースの監視、開発メモの記録、ファイル検索などの機能を提供します。

## 機能概要

このサーバーは以下の機能を提供します：

1.  **システムモニタリング**: 現在のCPUおよびメモリの使用状況を確認できます。
2.  **開発メモ管理**: SQLiteデータベースを使用して、タグ付きの開発メモを保存・参照できます。
3.  **ファイル検索**: 指定した拡張子を持つファイルをプロジェクト内で再帰的に検索します。
4.  **環境変数アクセス**: プロジェクトの `.env` ファイルの内容を確認できます。

## 機能詳細

### ツール (Tools)

- **`add_memo`**
  - **説明**: 新しい開発メモをデータベースに追加します。
  - **引数**:
    - `content` (必須): メモの内容。
    - `tags` (オプション): メモに関連付けるタグのリスト。

- **`get_system_stats`**
  - **説明**: 現在のシステム統計情報（CPU、メモリ使用率）を取得します。
  - **引数**: なし

- **`list_files_by_extension`**
  - **説明**: カレントディレクトリ以下にある、指定された拡張子を持つファイルを再帰的にリストアップします。
  - **引数**:
    - `extension` (必須): 検索するファイル拡張子（例: `rs`, `md`）。

### リソース (Resources)

- **`db://memos`**
  - **説明**: データベースに保存されているすべての開発メモをJSON形式で取得します。
  - **MIMEタイプ**: `application/json`

- **`env://vars`**
  - **説明**: プロジェクトルートにある `.env` ファイルの内容を取得します。
  - **MIMEタイプ**: `text/plain`

### プロンプト (Prompts)

- **`analyze-health`**
  - **説明**: 現在のシステム統計情報を取得し、開発環境の健全性を分析するためのプロンプトテンプレートです。AIにリソース不足や潜在的な問題を診断させるのに役立ちます。

## インストール方法

### 前提条件

- [Rust](https://www.rust-lang.org/tools/install) がインストールされていること。

### ビルド

プロジェクトのルートディレクトリで以下のコマンドを実行して、リリースビルドを作成します。

```bash
cargo build --release
```

ビルドが完了すると、実行ファイルが `target/release/local-dev-insights` に生成されます。

### 設定 (Configuration)

各IDEやMCPクライアントの設定ファイルに、このサーバーを登録します。

#### Antigravity / Claude Desktop

設定ファイル（`claude_desktop_config.json` など）の `mcpServers` セクションに以下を追加してください。`/absolute/path/to/` の部分は、実際にリポジトリをクローンしたディレクトリの絶対パスに置き換えてください。

```json
{
  "mcpServers": {
    "local-dev-insights": {
      "command": "/absolute/path/to/local-dev-insights/target/release/local-dev-insights",
      "args": [],
      "env": {
        "DATABASE_URL": "sqlite://dev_insights.db"
      }
    }
  }
}
```

> **注意**: データベースファイル `dev_insights.db` は、サーバーの実行ディレクトリ（通常はプロジェクトルート）に生成または期待されます。必要に応じて `DATABASE_URL` や作業ディレクトリを適切に設定してください。

#### その他一般的なMCPクライアント

標準入出力 (stdio) ベースのMCPサーバーとして動作するため、上記のJSON設定と同様に、コマンドライン引数として実行バイナリへのパスを指定することで利用可能です。

## 使い方

セットアップが完了し、MCPクライアント（AntigravityやClaude Desktopなど）を再起動すると、チャットインターフェースからツールやリソースを利用できるようになります。

**例:**
- 「システムの状態を教えて」→ `get_system_stats` ツールが呼び出されます。
- 「Rustのファイルを全部リストアップして」→ `list_files_by_extension` ツールが呼び出されます。
- 「この作業のメモを残して：〇〇を実装」→ `add_memo` ツールが呼び出されます。
- 「保存されたメモを見せて」→ `db://memos` リソースが読み込まれます。
